import random
import math

graph = {
    0: [1, 2, 3],
    1: [0, 2, 4, 5],
    2: [0, 1, 3, 6],
    3: [0, 2, 7, 8],
    4: [1, 5, 9],
    5: [1, 4, 6],
    6: [2, 5, 7],
    7: [3, 6, 8],
    8: [3, 7],
    9: [4]
}

vertices = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

def count_conflicts(coloring):
    conflicts = 0
    for vertex in vertices:
        for neighbor in graph[vertex]:
            if coloring[vertex] == coloring[neighbor]:
                conflicts += 1
    return conflicts // 2

def simulated_annealing():
    for num_colors in range(1, 11):
        print(f"\nПопытка раскраски с {num_colors} цветами:")
        
        coloring = {}
        for vertex in vertices:
            coloring[vertex] = random.randint(0, num_colors - 1)
        
        temperature = 100.0
        cooling_rate = 0.95
        min_temperature = 0.1
        
        iteration = 0
        while temperature > min_temperature:
            current_conflicts = count_conflicts(coloring)
            
            if iteration % 50 == 0:
                print(f"Температура: {temperature:.2f}, Конфликтов: {current_conflicts}")
            
            if current_conflicts == 0:
                print(f"Найдена допустимая раскраска с {num_colors} цветами!")
                return coloring, num_colors
            
            new_coloring = coloring.copy()
            random_vertex = random.choice(vertices)
            current_color = new_coloring[random_vertex]
            
            possible_colors = [c for c in range(num_colors) if c != current_color]
            if possible_colors:
                new_coloring[random_vertex] = random.choice(possible_colors)
            
            new_conflicts = count_conflicts(new_coloring)
            
            delta = new_conflicts - current_conflicts
            
            if delta < 0:
                coloring = new_coloring
            else:
                probability = math.exp(-delta / temperature)
                if random.random() < probability:
                    coloring = new_coloring
            
            temperature *= cooling_rate
            iteration += 1
    
    return None, 0

result_coloring, colors_used = simulated_annealing()

if result_coloring:
    print(f"\nКоличество использованных цветов: {colors_used}")
    print(f"Раскраска вершин: {result_coloring}")